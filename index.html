<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Council Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .nav-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-badge {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }

        .nav-tab {
            background: transparent;
            border: 2px solid #667eea;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #667eea;
        }

        .nav-tab:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-danger {
            background: #dc3545;
        }

        .btn-success {
            background: #28a745;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .btn:disabled:hover {
            transform: none;
            box-shadow: none;
        }

        #backBtn {
            font-size: 14px;
            padding: 10px 16px;
            border-radius: 20px;
            margin-right: 15px;
        }

        .content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            min-height: 500px;
        }

        .hidden {
            display: none;
        }

        .welcome-section {
            text-align: center;
            padding: 40px 0;
        }

        .welcome-title {
            font-size: 36px;
            font-weight: bold;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
        }

        .welcome-subtitle {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .event-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
            overflow: hidden;
        }

        .event-card:hover {
            transform: translateY(-5px);
        }

        .event-poster {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .event-poster:hover {
            transform: scale(1.02);
        }

        .event-poster-placeholder {
            width: 100%;
            height: 200px;
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            border-radius: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
            font-size: 18px;
            border: 2px dashed #ced4da;
        }

        .event-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .event-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        .event-date {
            color: #667eea;
            font-weight: 500;
        }

        .event-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .event-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .enrollment-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .enrollment-full {
            background: rgba(220, 53, 69, 0.1);
            border-left-color: #dc3545;
        }

        .enrollment-enrolled {
            background: rgba(40, 167, 69, 0.1);
            border-left-color: #28a745;
        }

        .participants-list {
            background: rgba(248, 249, 250, 0.8);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            border: 1px solid #e9ecef;
        }

        .participant-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .participant-item:last-child {
            border-bottom: none;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 28px;
            cursor: pointer;
            color: #aaa;
        }

        .close:hover {
            color: #000;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .image-upload-area {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            background: rgba(102, 126, 234, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 15px;
        }

        .image-upload-area:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #5a67d8;
        }

        .image-upload-area.dragover {
            background: rgba(102, 126, 234, 0.15);
            border-color: #4c51bf;
        }

        .upload-icon {
            font-size: 48px;
            color: #667eea;
            margin-bottom: 10px;
        }

        .image-preview {
            max-width: 100%;
            max-height: 200px;
            border-radius: 10px;
            margin-top: 10px;
        }

        .image-preview-container {
            position: relative;
            display: inline-block;
        }

        .remove-image-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .event-poster-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            cursor: pointer;
        }

        .event-poster-modal img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 90%;
            max-height: 90%;
            border-radius: 10px;
        }

        .sponsor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .sponsor-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .feedback-item {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .feedback-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .feedback-author {
            font-weight: bold;
            color: #667eea;
        }

        @media (max-width: 768px) {
            .nav-tabs {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .nav-tab {
                padding: 10px 16px;
                font-size: 14px;
            }
            
            #backBtn {
                width: 100%;
                margin-bottom: 10px;
                margin-right: 0;
            }
            
            .event-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .event-actions {
                flex-wrap: wrap;
            }

            .event-poster {
                height: 150px;
            }

            .event-poster-placeholder {
                height: 150px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="nav-bar">
                <div class="logo">üéì Student Council Portal</div>
                <div class="user-info" id="userInfo">
                    <button class="btn" onclick="showLogin()">Login</button>
                </div>
            </div>
            <div class="nav-tabs" id="navTabs">
                <button class="btn btn-secondary" id="backBtn" style="display: none;" onclick="goBack()">‚Üê Back</button>
                <button class="nav-tab active" onclick="showTab('home')">Home</button>
                <button class="nav-tab" onclick="showTab('about')">About</button>
                <button class="nav-tab" onclick="showTab('events')">Events</button>
                <button class="nav-tab" onclick="showTab('sponsors')">Sponsors</button>
                <button class="nav-tab" onclick="showTab('feedback')">Feedback</button>
            </div>
        </div>

        <div class="content" id="content">
            <!-- Home Tab -->
            <div id="home" class="tab-content">
                <div class="welcome-section">
                    <h1 class="welcome-title">Welcome to Student Council</h1>
                    <p class="welcome-subtitle">Your gateway to campus events, activities, and student engagement</p>
                </div>
                <div class="features">
                    <div class="feature-card">
                        <div class="feature-icon">üìÖ</div>
                        <h3>Events</h3>
                        <p>Discover upcoming events and activities organized by the student council</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ü§ù</div>
                        <h3>Sponsors</h3>
                        <p>Meet our amazing sponsors who make our events possible</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üí¨</div>
                        <h3>Feedback</h3>
                        <p>Share your thoughts and suggestions with the student council</p>
                    </div>
                </div>
            </div>

            <!-- About Tab -->
            <div id="about" class="tab-content hidden">
                <h2>About Student Council</h2>
                <p style="margin-bottom: 20px; line-height: 1.6; color: #666;">
                    The Student Council serves as the voice of the student body, working tirelessly to enhance campus life and create memorable experiences for all students. Our mission is to foster a vibrant campus community through engaging events, meaningful initiatives, and open communication between students and administration.
                </p>
                <h3 style="margin-bottom: 15px; color: #667eea;">Our Vision</h3>
                <p style="margin-bottom: 20px; line-height: 1.6; color: #666;">
                    To create an inclusive, dynamic, and supportive environment where every student can thrive academically, socially, and personally.
                </p>
                <h3 style="margin-bottom: 15px; color: #667eea;">What We Do</h3>
                <ul style="margin-left: 20px; line-height: 1.8; color: #666;">
                    <li>Organize campus-wide events and activities</li>
                    <li>Represent student interests in academic and administrative matters</li>
                    <li>Facilitate communication between students and faculty</li>
                    <li>Support student clubs and organizations</li>
                    <li>Promote student welfare and well-being</li>
                    <li>Connect students with our generous sponsors and partners</li>
                </ul>
            </div>

            <!-- Events Tab -->
            <div id="events" class="tab-content hidden">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2>Campus Events</h2>
                    <button class="btn" id="addEventBtn" style="display: none;" onclick="showAddEventModal()">Add Event</button>
                </div>
                <div id="eventsList">
                    <!-- Events will be populated here -->
                </div>
            </div>

            <!-- Sponsors Tab -->
            <div id="sponsors" class="tab-content hidden">
                <h2>Our Sponsors</h2>
                <p style="margin-bottom: 30px; color: #666;">We're grateful to our sponsors who make our events and activities possible.</p>
                <div class="sponsor-grid">
                    <div class="sponsor-card">
                        <h3>TechCorp Solutions</h3>
                        <p>Supporting innovation and technology events</p>
                    </div>
                    <div class="sponsor-card">
                        <h3>Campus Bookstore</h3>
                        <p>Providing prizes and academic resources</p>
                    </div>
                    <div class="sponsor-card">
                        <h3>Local Pizza Co.</h3>
                        <p>Catering services for student events</p>
                    </div>
                    <div class="sponsor-card">
                        <h3>Sports Equipment Inc.</h3>
                        <p>Supporting athletic events and competitions</p>
                    </div>
                </div>
            </div>

            <!-- Feedback Tab -->
            <div id="feedback" class="tab-content hidden">
                <h2>Student Feedback</h2>
                <div style="margin-bottom: 30px;">
                    <div class="form-group">
                        <label for="feedbackText">Share your feedback:</label>
                        <textarea id="feedbackText" rows="4" placeholder="Your thoughts, suggestions, or comments..."></textarea>
                    </div>
                    <button class="btn" onclick="submitFeedback()">Submit Feedback</button>
                </div>
                <div id="feedbackList">
                    <!-- Feedback will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="hideModal('loginModal')">&times;</span>
            <h2 style="margin-bottom: 20px; text-align: center;">Login</h2>
            <div style="max-width: 400px; margin: 0 auto; text-align: center;">
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" id="username" placeholder="Enter your username">
                </div>
                <div class="form-group">
                    <label for="password">Password:</label>
                    <input type="password" id="password" placeholder="Enter your password">
                </div>
                <div class="form-group">
                    <label for="userType">Login as:</label>
                    <select id="userType">
                        <option value="student">Student</option>
                        <option value="secretary">Secretary</option>
                    </select>
                </div>
                <button class="btn" onclick="login()">Login</button>
            </div>
            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px; font-size: 14px;">
                <strong>Demo Credentials:</strong><br>
                Student: username=student, password=student123<br>
                Secretary: username=secretary, password=secretary123
            </div>
        </div>
    </div>

    <!-- Add Event Modal -->
    <div id="addEventModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="hideModal('addEventModal')">&times;</span>
            <h2 style="margin-bottom: 20px; text-align: center;">Add New Event</h2>
            <div class="form-group">
                <label for="eventTitle">Event Title:</label>
                <input type="text" id="eventTitle" placeholder="Enter event title">
            </div>
            <div class="form-group">
                <label for="eventDate">Event Date:</label>
                <input type="date" id="eventDate">
            </div>
            <div class="form-group">
                <label for="eventDescription">Event Description:</label>
                <textarea id="eventDescription" rows="4" placeholder="Enter event description"></textarea>
            </div>
            <div class="form-group">
                <label for="eventLocation">Location:</label>
                <input type="text" id="eventLocation" placeholder="Enter event location">
            </div>
            <div class="form-group">
                <label for="eventPoster">Event Poster:</label>
                <div class="image-upload-area" onclick="document.getElementById('eventPosterInput').click()">
                    <div class="upload-icon">üì∏</div>
                    <p>Click to upload or drag and drop</p>
                    <p style="font-size: 12px; color: #666;">JPG, PNG, GIF up to 5MB</p>
                </div>
                <input type="file" id="eventPosterInput" accept="image/*" style="display: none;" onchange="previewImage('eventPosterInput', 'eventPosterPreview')">
                <div id="eventPosterPreview"></div>
            </div>
            <div class="form-group">
                <label for="eventMaxParticipants">Maximum Participants:</label>
                <input type="number" id="eventMaxParticipants" placeholder="Enter maximum participants" min="1">
            </div>
            <button class="btn" onclick="addEvent()">Add Event</button>
        </div>
    </div>

    <!-- Edit Event Modal -->
    <div id="editEventModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="hideModal('editEventModal')">&times;</span>
            <h2 style="margin-bottom: 20px; text-align: center;">Edit Event</h2>
            <div class="form-group">
                <label for="editEventTitle">Event Title:</label>
                <input type="text" id="editEventTitle" placeholder="Enter event title">
            </div>
            <div class="form-group">
                <label for="editEventDate">Event Date:</label>
                <input type="date" id="editEventDate">
            </div>
            <div class="form-group">
                <label for="editEventDescription">Event Description:</label>
                <textarea id="editEventDescription" rows="4" placeholder="Enter event description"></textarea>
            </div>
            <div class="form-group">
                <label for="editEventLocation">Location:</label>
                <input type="text" id="editEventLocation" placeholder="Enter event location">
            </div>
            <div class="form-group">
                <label for="editEventPoster">Event Poster:</label>
                <div class="image-upload-area" onclick="document.getElementById('editEventPosterInput').click()">
                    <div class="upload-icon">üì∏</div>
                    <p>Click to upload or drag and drop</p>
                    <p style="font-size: 12px; color: #666;">JPG, PNG, GIF up to 5MB</p>
                </div>
                <input type="file" id="editEventPosterInput" accept="image/*" style="display: none;" onchange="previewImage('editEventPosterInput', 'editEventPosterPreview')">
                <div id="editEventPosterPreview"></div>
            </div>
            <div class="form-group">
                <label for="editEventMaxParticipants">Maximum Participants:</label>
                <input type="number" id="editEventMaxParticipants" placeholder="Enter maximum participants" min="1">
            </div>
            <button class="btn" onclick="updateEvent()">Update Event</button>
        </div>
    </div>

    <!-- Sponsor Video Modal -->
    <div id="sponsorVideoModal" class="modal">
        <div class="modal-content" style="max-width: 800px; text-align: center;">
            <h2 style="margin-bottom: 20px; color: #667eea;">üé¨ Message from Our Sponsors</h2>
            <div style="position: relative; width: 100%; height: 400px; background: #000; border-radius: 15px; overflow: hidden; margin-bottom: 20px;">
                <video id="sponsorVideo" width="100%" height="100%" controls style="object-fit: cover;">
                    <source src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            <p style="color: #666; margin-bottom: 20px; font-size: 16px;">
                üôè Our events are made possible by the generous support of our sponsors. Please take a moment to watch this message from our partners who help make these amazing events happen!
            </p>
            <div style="background: rgba(102, 126, 234, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                <p style="color: #667eea; margin: 0; font-weight: 500;">
                    ‚è±Ô∏è After watching or skipping this video, you'll be successfully enrolled in the event!
                </p>
            </div>
            <button class="btn btn-secondary" id="skipVideoBtn" onclick="skipSponsorVideo()" style="margin-right: 10px;">Skip Video (5s)</button>
            <button class="btn" id="continueBtn" onclick="completeEnrollment()" style="display: none;">Continue to Enrollment</button>
        </div>
    </div>

    <!-- Enrollment Success Modal -->
    <div id="enrollmentSuccessModal" class="modal">
        <div class="modal-content" style="text-align: center; max-width: 500px;">
            <div style="font-size: 64px; margin-bottom: 20px;">üéâ</div>
            <h2 style="color: #28a745; margin-bottom: 20px;">Successfully Enrolled!</h2>
            <p style="color: #666; margin-bottom: 20px; font-size: 18px;">
                You have successfully enrolled in <strong id="enrolledEventTitle"></strong>
            </p>
            <div style="background: rgba(40, 167, 69, 0.1); padding: 20px; border-radius: 15px; margin: 20px 0;">
                <p style="color: #28a745; margin-bottom: 10px;">
                    <strong>üìÖ Event Details:</strong>
                </p>
                <p style="color: #666;" id="enrolledEventDetails"></p>
            </div>
            <p style="color: #666; margin-bottom: 20px;">
                Check your email for confirmation details and event updates!
            </p>
            <button class="btn" onclick="hideModal('enrollmentSuccessModal')">Got it!</button>
        </div>
    </div>

    <!-- Event Poster Modal -->
    <div id="eventPosterModal" class="event-poster-modal" onclick="hideModal('eventPosterModal')">
        <img id="eventPosterModalImage" src="" alt="Event Poster">
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let currentUserType = null;
        let currentEditingEventId = null;
        let currentEnrollingEventId = null;
        let navigationHistory = ['home'];
        let currentPage = 'home';
        let skipCountdown = 5;
        let countdownInterval = null;
        
        // Sponsor videos - Replace with your actual video paths
        const sponsorVideos = [
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4",
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4",
            "https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4"
        ];
        
        // Sample events data
        let events = [
            {
                id: 1,
                title: "Welcome Week Festival",
                date: "2025-08-15",
                description: "Join us for an exciting week of activities to welcome new students to campus! Food trucks, live music, games, and much more.",
                location: "Main Campus Quad",
                maxParticipants: 500,
                enrolledStudents: ["alice", "bob", "charlie"],
                poster: "https://images.unsplash.com/photo-1511578314322-379afb476865?w=800&h=600&fit=crop"
            },
            {
                id: 2,
                title: "Academic Excellence Awards",
                date: "2025-09-20",
                description: "Annual ceremony recognizing outstanding academic achievements by students across all departments.",
                location: "University Auditorium",
                maxParticipants: 200,
                enrolledStudents: ["alice", "diana"],
                poster: "https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=800&h=600&fit=crop"
            },
            {
                id: 3,
                title: "Cultural Diversity Night",
                date: "2025-10-10",
                description: "A celebration of the diverse cultures on our campus featuring food, music, and performances from around the world.",
                location: "Student Center",
                maxParticipants: 300,
                enrolledStudents: ["bob"],
                poster: "https://images.unsplash.com/photo-1539635278303-d4002c07eae3?w=800&h=600&fit=crop"
            }
        ];

        // Sample feedback data
        let feedbacks = [
            {
                id: 1,
                author: "Anonymous Student",
                text: "The recent cultural festival was amazing! Great job organizing it.",
                date: "2025-07-10"
            },
            {
                id: 2,
                author: "John D.",
                text: "Would love to see more sports events and competitions.",
                date: "2025-07-08"
            }
        ];

        // Initialize the page
        function init() {
            console.log('Initializing page...');
            showTab('home');
            updateEventsList();
            updateFeedbackList();
            updateBackButton();
            
            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            const eventDate = document.getElementById('eventDate');
            const editEventDate = document.getElementById('editEventDate');
            if (eventDate) eventDate.min = today;
            if (editEventDate) editEventDate.min = today;
            
            console.log('Page initialized successfully');
        }

        // Tab navigation
        function showTab(tabName) {
            console.log('Showing tab:', tabName);
            
            // Add to navigation history if it's a new page
            if (currentPage !== tabName) {
                navigationHistory.push(tabName);
                if (navigationHistory.length > 10) {
                    navigationHistory.shift();
                }
                currentPage = tabName;
            }
            
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(tab => tab.classList.add('hidden'));
            
            // Show selected tab
            const targetTab = document.getElementById(tabName);
            if (targetTab) {
                targetTab.classList.remove('hidden');
            }
            
            // Update active tab
            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Find and activate the correct tab button
            const tabButtons = document.querySelectorAll('.nav-tab');
            tabButtons.forEach(button => {
                if (button.textContent.toLowerCase() === tabName || 
                    (tabName === 'home' && button.textContent === 'Home') ||
                    (tabName === 'about' && button.textContent === 'About') ||
                    (tabName === 'events' && button.textContent === 'Events') ||
                    (tabName === 'sponsors' && button.textContent === 'Sponsors') ||
                    (tabName === 'feedback' && button.textContent === 'Feedback')) {
                    button.classList.add('active');
                }
            });
            
            updateBackButton();
        }

        // Back button functionality
        function goBack() {
            console.log('Going back...');
            if (navigationHistory.length > 1) {
                navigationHistory.pop();
                const previousPage = navigationHistory[navigationHistory.length - 1];
                currentPage = previousPage;
                showTab(previousPage);
            }
        }

        function updateBackButton() {
            const backBtn = document.getElementById('backBtn');
            if (!backBtn) return;
            
            if (navigationHistory.length > 1 && currentPage !== 'home') {
                backBtn.style.display = 'block';
                const previousPage = navigationHistory[navigationHistory.length - 2];
                backBtn.innerHTML = `‚Üê Back to ${previousPage.charAt(0).toUpperCase() + previousPage.slice(1)}`;
            } else {
                backBtn.style.display = 'none';
            }
        }

        // Modal management
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
            }
        }

        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // Login functionality
        function showLogin() {
            showModal('loginModal');
        }

        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const userType = document.getElementById('userType').value;

            if ((username === 'student' && password === 'student123') || 
                (username === 'secretary' && password === 'secretary123')) {
                
                currentUser = username;
                currentUserType = userType;
                
                // Update UI
                document.getElementById('userInfo').innerHTML = `
                    <div class="user-badge">${userType.charAt(0).toUpperCase() + userType.slice(1)}: ${username}</div>
                    <button class="btn btn-secondary" onclick="logout()">Logout</button>
                `;
                
                // Show secretary features
                if (userType === 'secretary') {
                    const addEventBtn = document.getElementById('addEventBtn');
                    if (addEventBtn) addEventBtn.style.display = 'block';
                }
                
                hideModal('loginModal');
                updateEventsList();
                
                // Clear form
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
                
                console.log('Login successful:', userType, username);
            } else {
                alert('Invalid credentials! Please use the demo credentials provided.');
            }
        }

        function logout() {
            currentUser = null;
            currentUserType = null;
            document.getElementById('userInfo').innerHTML = '<button class="btn" onclick="showLogin()">Login</button>';
            const addEventBtn = document.getElementById('addEventBtn');
            if (addEventBtn) addEventBtn.style.display = 'none';
            updateEventsList();
            console.log('Logout successful');
        }

        // Image handling
        function previewImage(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            const file = input.files[0];
            
            if (file && preview) {
                if (file.size > 5 * 1024 * 1024) {
                    alert('File size must be less than 5MB');
                    input.value = '';
                    return;
                }
                
                if (!file.type.startsWith('image/')) {
                    alert('Please select an image file');
                    input.value = '';
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.innerHTML = `
                        <div class="image-preview-container">
                            <img src="${e.target.result}" alt="Event Poster Preview" class="image-preview">
                            <button type="button" class="remove-image-btn" onclick="removeImage('${inputId}', '${previewId}')">&times;</button>
                        </div>
                    `;
                };
                reader.readAsDataURL(file);
            }
        }

        function removeImage(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            if (input) input.value = '';
            if (preview) preview.innerHTML = '';
        }

        function showEventPosterModal(posterSrc) {
            const modal = document.getElementById('eventPosterModal');
            const image = document.getElementById('eventPosterModalImage');
            if (modal && image) {
                image.src = posterSrc;
                modal.style.display = 'block';
            }
        }

        // Event enrollment with sponsor video
        function enrollInEvent(eventId) {
            console.log('Enrolling in event:', eventId);
            
            if (!currentUser || currentUserType !== 'student') {
                alert('Please log in as a student to enroll in events!');
                return;
            }

            const event = events.find(e => e.id === eventId);
            if (!event) return;

            if (event.enrolledStudents.includes(currentUser)) {
                alert('You are already enrolled in this event!');
                return;
            }

            if (event.enrolledStudents.length >= event.maxParticipants) {
                alert('Sorry, this event is full!');
                return;
            }

            currentEnrollingEventId = eventId;
            showSponsorVideo();
        }

        function showSponsorVideo() {
            console.log('Showing sponsor video...');
            
            const randomVideo = sponsorVideos[Math.floor(Math.random() * sponsorVideos.length)];
            const video = document.getElementById('sponsorVideo');
            const modal = document.getElementById('sponsorVideoModal');
            
            if (video && modal) {
                video.src = randomVideo;
                video.load();
                
                showModal('sponsorVideoModal');
                document.getElementById('skipVideoBtn').style.display = 'block';
                document.getElementById('continueBtn').style.display = 'none';
                
                // Start countdown
                skipCountdown = 5;
                const skipBtn = document.getElementById('skipVideoBtn');
                skipBtn.disabled = true;
                skipBtn.textContent = `Skip Video (${skipCountdown}s)`;
                
                if (countdownInterval) clearInterval(countdownInterval);
                countdownInterval = setInterval(() => {
                    skipCountdown--;
                    if (skipCountdown > 0) {
                        skipBtn.textContent = `Skip Video (${skipCountdown}s)`;
                    } else {
                        skipBtn.textContent = 'Skip Video';
                        skipBtn.disabled = false;
                        clearInterval(countdownInterval);
                    }
                }, 1000);
                
                // Try to auto-play
                video.play().catch(error => {
                    console.log('Auto-play prevented:', error);
                });
                
                // Video end handler
                video.onended = function() {
                    if (countdownInterval) clearInterval(countdownInterval);
                    document.getElementById('skipVideoBtn').style.display = 'none';
                    document.getElementById('continueBtn').style.display = 'block';
                };
            }
        }

        function skipSponsorVideo() {
            const skipBtn = document.getElementById('skipVideoBtn');
            if (!skipBtn.disabled) {
                completeEnrollment();
            }
        }

        function completeEnrollment() {
            console.log('Completing enrollment...');
            
            const video = document.getElementById('sponsorVideo');
            if (video) {
                video.pause();
                video.currentTime = 0;
            }
            
            if (countdownInterval) {
                clearInterval(countdownInterval);
                countdownInterval = null;
            }
            
            hideModal('sponsorVideoModal');
            
            const event = events.find(e => e.id === currentEnrollingEventId);
            if (event) {
                event.enrolledStudents.push(currentUser);
                updateEventsList();
                
                setTimeout(() => {
                    showEnrollmentSuccess(event);
                }, 300);
            }
            
            currentEnrollingEventId = null;
        }

        function showEnrollmentSuccess(event) {
            const title = document.getElementById('enrolledEventTitle');
            const details = document.getElementById('enrolledEventDetails');
            
            if (title && details) {
                title.textContent = event.title;
                details.innerHTML = `
                    <strong>üìÖ Date:</strong> ${new Date(event.date).toLocaleDateString()}<br>
                    <strong>üìç Location:</strong> ${event.location}<br>
                    <strong>üë• Participants:</strong> ${event.enrolledStudents.length}/${event.maxParticipants}
                `;
                showModal('enrollmentSuccessModal');
            }
        }

        function unenrollFromEvent(eventId) {
            if (!currentUser || currentUserType !== 'student') {
                alert('Please log in as a student to unenroll from events!');
                return;
            }

            const event = events.find(e => e.id === eventId);
            if (!event) return;

            const index = event.enrolledStudents.indexOf(currentUser);
            if (index > -1) {
                event.enrolledStudents.splice(index, 1);
                updateEventsList();
                alert('Successfully unenrolled from the event!');
            }
        }

        function toggleParticipantsList(eventId) {
            const participantsList = document.getElementById(`participants-${eventId}`);
            if (participantsList) {
                participantsList.classList.toggle('hidden');
            }
        }

        function removeParticipant(eventId, studentName) {
            if (currentUserType !== 'secretary') {
                alert('Only secretaries can remove participants!');
                return;
            }

            if (confirm(`Are you sure you want to remove ${studentName} from this event?`)) {
                const event = events.find(e => e.id === eventId);
                if (event) {
                    const index = event.enrolledStudents.indexOf(studentName);
                    if (index > -1) {
                        event.enrolledStudents.splice(index, 1);
                        updateEventsList();
                    }
                }
            }
        }

        // Event management
        function showAddEventModal() {
            if (currentUserType !== 'secretary') {
                alert('Only secretaries can add events!');
                return;
            }
            showModal('addEventModal');
        }

        function clearAddEventForm() {
            const fields = ['eventTitle', 'eventDate', 'eventDescription', 'eventLocation', 'eventMaxParticipants', 'eventPosterInput'];
            fields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) field.value = '';
            });
            const preview = document.getElementById('eventPosterPreview');
            if (preview) preview.innerHTML = '';
        }

        function addEvent() {
    const title = document.getElementById('eventTitle').value;
    const date = document.getElementById('eventDate').value;
    const description = document.getElementById('eventDescription').value;
    const location = document.getElementById('eventLocation').value;
    const maxParticipants = parseInt(document.getElementById('eventMaxParticipants').value) || 100;
    const posterInput = document.getElementById('eventPosterInput');

    if (!title || !date || !description || !location) {
        alert('Please fill in all required fields!');
        return;
    }

    function createEvent(posterUrl = '') {
        const newEvent = {
            id: Date.now(),  // üî• Use timestamp for unique ID
            title: title,
            date: date,
            description: description,
            location: location,
            maxParticipants: maxParticipants,
            enrolledStudents: [],
            poster: posterUrl
        };

        events.push(newEvent);
        updateEventsList();
        hideModal('addEventModal');
        clearAddEventForm();
        console.log('Event added:', newEvent);
    }

    if (posterInput && posterInput.files[0]) {
        const reader = new FileReader();
        reader.onload = function(e) {
            createEvent(e.target.result);
        };
        reader.readAsDataURL(posterInput.files[0]);
    } else {
        createEvent();
    }
}

        function showEditEventModal(eventId) {
            if (currentUserType !== 'secretary') {
                alert('Only secretaries can edit events!');
                return;
            }
            
            const event = events.find(e => e.id === eventId);
            if (!event) return;

            currentEditingEventId = eventId;
            
            document.getElementById('editEventTitle').value = event.title;
            document.getElementById('editEventDate').value = event.date;
            document.getElementById('editEventDescription').value = event.description;
            document.getElementById('editEventLocation').value = event.location;
            document.getElementById('editEventMaxParticipants').value = event.maxParticipants;
            
            const previewDiv = document.getElementById('editEventPosterPreview');
            if (previewDiv) {
                if (event.poster) {
                    previewDiv.innerHTML = `
                        <div class="image-preview-container">
                            <img src="${event.poster}" alt="Current Event Poster" class="image-preview">
                            <button type="button" class="remove-image-btn" onclick="removeImage('editEventPosterInput', 'editEventPosterPreview')">&times;</button>
                        </div>
                    `;
                } else {
                    previewDiv.innerHTML = '';
                }
            }
            
            showModal('editEventModal');
        }

        function updateEvent() {
            const title = document.getElementById('editEventTitle').value;
            const date = document.getElementById('editEventDate').value;
            const description = document.getElementById('editEventDescription').value;
            const location = document.getElementById('editEventLocation').value;
            const maxParticipants = parseInt(document.getElementById('editEventMaxParticipants').value) || 100;
            const posterInput = document.getElementById('editEventPosterInput');

            if (!title || !date || !description || !location) {
                alert('Please fill in all fields!');
                return;
            }

            const eventIndex = events.findIndex(e => e.id === currentEditingEventId);
            if (eventIndex !== -1) {
                function updateEventData(posterUrl = null) {
                    events[eventIndex] = {
                        ...events[eventIndex],
                        title: title,
                        date: date,
                        description: description,
                        location: location,
                        maxParticipants: maxParticipants,
                        poster: posterUrl !== null ? posterUrl : events[eventIndex].poster
                    };
                    updateEventsList();
                    hideModal('editEventModal');
                    currentEditingEventId = null;
                    console.log('Event updated:', events[eventIndex]);
                }

                if (posterInput && posterInput.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        updateEventData(e.target.result);
                    };
                    reader.readAsDataURL(posterInput.files[0]);
                } else {
                    updateEventData();
                }
            }
        }

        function deleteEvent(eventId) {
            if (currentUserType !== 'secretary') {
                alert('Only secretaries can delete events!');
                return;
            }
            
            if (confirm('Are you sure you want to delete this event?')) {
                events = events.filter(e => e.id !== eventId);
                updateEventsList();
                console.log('Event deleted:', eventId);
            }
        }

        function updateEventsList() {
            const eventsList = document.getElementById('eventsList');
            if (!eventsList) return;
            
            if (events.length === 0) {
                eventsList.innerHTML = '<p style="text-align: center; color: #666;">No events scheduled at the moment.</p>';
                return;
            }

            eventsList.innerHTML = events.map(event => {
                const isEnrolled = currentUser && event.enrolledStudents.includes(currentUser);
                const isFull = event.enrolledStudents.length >= event.maxParticipants;
                const canEnroll = currentUser && currentUserType === 'student' && !isEnrolled && !isFull;
                const canUnenroll = currentUser && currentUserType === 'student' && isEnrolled;
                
                let enrollmentStatusClass = 'enrollment-status';
                let enrollmentStatusText = `üë• ${event.enrolledStudents.length}/${event.maxParticipants} enrolled`;
                
                if (isFull) {
                    enrollmentStatusClass = 'enrollment-full';
                    enrollmentStatusText = 'üö´ Event Full';
                } else if (isEnrolled) {
                    enrollmentStatusClass = 'enrollment-enrolled';
                    enrollmentStatusText = '‚úÖ You are enrolled';
                }

                return `
                    <div class="event-card">
                        ${event.poster ? 
                            `<img src="${event.poster}" alt="${event.title} Poster" class="event-poster" onclick="showEventPosterModal('${event.poster}')">` : 
                            `<div class="event-poster-placeholder">üìÖ Event Poster</div>`
                        }
                        
                        <div class="event-header">
                            <div class="event-title">${event.title}</div>
                            <div class="event-date">${new Date(event.date).toLocaleDateString()}</div>
                        </div>
                        <div class="event-description">${event.description}</div>
                        <div style="margin-bottom: 15px; color: #667eea; font-weight: 500;">
                            üìç ${event.location}
                        </div>
                        
                        <div class="${enrollmentStatusClass}">
                            <span>${enrollmentStatusText}</span>
                        </div>
                        
                        <div class="event-actions">
                            ${canEnroll ? `<button class="btn btn-success" onclick="enrollInEvent(${event.id})">Enroll Now</button>` : ''}
                            ${canUnenroll ? `<button class="btn btn-warning" onclick="unenrollFromEvent(${event.id})">Unenroll</button>` : ''}
                            ${currentUserType === 'secretary' ? `
                                <button class="btn" onclick="showEditEventModal(${event.id})">Edit</button>
                                <button class="btn btn-danger" onclick="deleteEvent(${event.id})">Delete</button>
                                <button class="btn btn-secondary" onclick="toggleParticipantsList(${event.id})">View Participants</button>
                            ` : ''}
                        </div>
                        
                        ${currentUserType === 'secretary' ? `
                            <div id="participants-${event.id}" class="participants-list hidden">
                                <h4 style="margin-bottom: 10px;">Enrolled Participants (${event.enrolledStudents.length}/${event.maxParticipants})</h4>
                                ${event.enrolledStudents.length > 0 ? 
                                    event.enrolledStudents.map(student => `
                                        <div class="participant-item">
                                            <span>${student}</span>
                                            <button class="btn btn-danger" style="padding: 5px 10px; font-size: 12px;" onclick="removeParticipant(${event.id}, '${student}')">Remove</button>
                                        </div>
                                    `).join('') : 
                                    '<p style="color: #666; text-align: center;">No participants enrolled yet.</p>'
                                }
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // Feedback management
        function submitFeedback() {
            const feedbackText = document.getElementById('feedbackText');
            if (!feedbackText || !feedbackText.value.trim()) {
                alert('Please enter your feedback!');
                return;
            }

            const newFeedback = {
                id: feedbacks.length + 1,
                author: currentUser ? currentUser : 'Anonymous',
                text: feedbackText.value,
                date: new Date().toISOString().split('T')[0]
            };

            feedbacks.unshift(newFeedback);
            updateFeedbackList();
            feedbackText.value = '';
            console.log('Feedback submitted:', newFeedback);
        }

        function updateFeedbackList() {
            const feedbackList = document.getElementById('feedbackList');
            if (!feedbackList) return;
            
            if (feedbacks.length === 0) {
                feedbackList.innerHTML = '<p style="text-align: center; color: #666;">No feedback yet.</p>';
                return;
            }

            feedbackList.innerHTML = feedbacks.map(feedback => `
                <div class="feedback-item">
                    <div class="feedback-header">
                        <div class="feedback-author">${feedback.author}</div>
                        <div class="feedback-date">${new Date(feedback.date).toLocaleDateString()}</div>
                    </div>
                    <div>${feedback.text}</div>
                </div>
            `).join('');
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);
        window.addEventListener('load', init);
    </script>
</body>
</html>